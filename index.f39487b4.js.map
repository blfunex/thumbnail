{"mappings":"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","sources":["src/main.ts"],"sourcesContent":["const UPLOAD_STAGE = \"upload-stage\";\nconst LOADING_STAGE = \"loading-stage\";\nconst VIDEO_STAGE = \"video-stage\";\nconst THUMBNAIL_STAGE = \"thumbnail-stage\";\n\nconst DROP_ZONE = \"upload-drop-zone\";\nconst FILE_INPUT = \"upload-file-input\";\n\nconst VIDEO = \"video\";\nconst FILE_NAME = \"loading-filename\";\nconst LOADING_PROGRESS = \"loading-progress\";\nconst BACK_UPLOAD = \"back-to-upload-button\";\nconst VIDEO_SCRUBBER = \"video-time-range\";\nconst VIDEO_TIME = \"video-time-input\";\nconst VIDEO_DURATION = \"video-duration-output\";\nconst GENERATE_BUTTON = \"generate-thumbnail\";\nconst THUMBNAIL_IMAGE = \"thumbnail-image\";\nconst THUMBNAIL_DOWNLOAD = \"thumbnail-download-link\";\nconst RESTART_BUTTON = \"thumbnail-new-button\";\nconst BACK_VIDEO = \"back-to-video-button\";\nconst UPLOAD_FORM = \"upload-form\";\n\nconst fileDropZone = <HTMLLabelElement>document.getElementById(DROP_ZONE);\nconst fileUploadInput = <HTMLInputElement>document.getElementById(FILE_INPUT);\nconst fileNameOutput = <HTMLOutputElement>document.getElementById(FILE_NAME);\nconst videoPlayer = <HTMLVideoElement>document.getElementById(VIDEO);\nconst toUpload = <HTMLButtonElement>document.getElementById(BACK_UPLOAD);\nconst videoRange = <HTMLInputElement>document.getElementById(VIDEO_SCRUBBER);\nconst videoTime = <HTMLInputElement>document.getElementById(VIDEO_TIME);\nconst videoDur = <HTMLOutputElement>document.getElementById(VIDEO_DURATION);\nconst loading = <HTMLProgressElement>document.getElementById(LOADING_PROGRESS);\nconst generate = <HTMLButtonElement>document.getElementById(GENERATE_BUTTON);\nconst thumbnail = <HTMLImageElement>document.getElementById(THUMBNAIL_IMAGE);\nconst download = <HTMLAnchorElement>document.getElementById(THUMBNAIL_DOWNLOAD);\nconst toVideo = <HTMLButtonElement>document.getElementById(BACK_VIDEO);\nconst restart = <HTMLButtonElement>document.getElementById(RESTART_BUTTON);\nconst uploadForm = <HTMLFormElement>document.getElementById(UPLOAD_FORM);\nconst canvas = document.createElement(\"canvas\");\nconst ctx = canvas.getContext(\"2d\", {\n  alpha: false,\n  desynchronized: true,\n  colorSpace: \"srgb\",\n  willReadFrequently: true,\n})!;\n\nconst stages = {\n  upload: document.getElementById(UPLOAD_STAGE)!,\n  loading: document.getElementById(LOADING_STAGE)!,\n  video: document.getElementById(VIDEO_STAGE)!,\n  thumbnail: document.getElementById(THUMBNAIL_STAGE)!,\n};\nconst stage = {\n  close() {\n    for (const element of Object.values<HTMLElement>(stages)) {\n      element.hidden = true;\n    }\n  },\n  show(name: Stage) {\n    this.close();\n    stages[name].hidden = false;\n  },\n  tansition(from: Stage, to: Stage) {\n    if (stages[from].hidden) return;\n    stages[from].hidden = true;\n    stages[to].hidden = false;\n  },\n};\n\ntype Stage = keyof typeof stages;\n\nstage.show(\"upload\");\n\nfileDropZone.addEventListener(\"dragover\", (e) => {\n  e.preventDefault();\n  fileDropZone.classList.add(\"drag-over\");\n});\n\nfileDropZone.addEventListener(\"dragleave\", (e) => {\n  e.preventDefault();\n  fileDropZone.classList.remove(\"drag-over\");\n});\n\nfileDropZone.addEventListener(\"drop\", (e) => {\n  e.preventDefault();\n  fileDropZone.classList.remove(\"drag-over\");\n  const file = e.dataTransfer?.files[0];\n  if (!file) return;\n  onFileSelected(file);\n});\n\nfileUploadInput.addEventListener(\"change\", (e) => {\n  const file = fileUploadInput.files?.[0];\n\n  fileUploadInput.value = \"\";\n  fileUploadInput.blur();\n  if (!file) return;\n  onFileSelected(file);\n});\n\ndocument.addEventListener(\"paste\", (e) => {\n  const file = e.clipboardData?.files?.[0];\n  if (!file || file.type.startsWith(\"video/\")) return;\n  onFileSelected(file);\n});\n\nfunction goBackToUpload() {\n  videoPlayer.srcObject = null;\n  uploadForm.reset();\n  stage.show(\"upload\");\n}\n\nfunction onFileSelected(file: File) {\n  fileNameOutput.value = file.name;\n  videoPlayer.src = URL.createObjectURL(file);\n  loading.value = 0;\n  videoRange.value = \"0\";\n  videoTime.value = \"00:00\";\n  download.download = removeExt(file.name);\n  stage.show(\"loading\");\n}\n\nfunction onVideoProgress() {\n  const end = videoPlayer.buffered.end(0);\n  loading.value = (end / videoPlayer.duration) * 100;\n}\n\nvideoPlayer.addEventListener(\"loadedmetadata\", () => {\n  videoPlayer.addEventListener(\"progress\", onVideoProgress);\n  videoDur.value = getDurationString(videoPlayer.duration);\n});\n\nfunction getDurationString(duration: number) {\n  duration = Math.ceil(duration);\n  const seconds = duration % 60;\n  const minutes = Math.floor(duration / 60);\n  const ss = pad(seconds);\n  const mm = pad(minutes);\n  return `${mm}:${ss}`;\n}\n\nvideoPlayer.addEventListener(\"canplaythrough\", () => {\n  videoPlayer.removeEventListener(\"progress\", onVideoProgress);\n  stage.tansition(\"loading\", \"video\");\n  videoPlayer.loop = true;\n});\n\ntoUpload.addEventListener(\"click\", goBackToUpload);\ntoVideo.addEventListener(\"click\", () => stage.show(\"video\"));\nrestart.addEventListener(\"click\", goBackToUpload);\n\nvideoPlayer.addEventListener(\"timeupdate\", () => {\n  updateTimeRange();\n  updateTimeInput();\n});\n\nfunction pad(seconds: number) {\n  return seconds.toString().padStart(2, \"0\");\n}\n\nfunction onVideoRangeChange() {\n  videoPlayer.pause();\n  const value = videoRange.valueAsNumber;\n  const percent = value / 100;\n  videoPlayer.currentTime = videoPlayer.duration * percent;\n  updateTimeInput();\n}\n\nfunction updateTimeInput() {\n  videoTime.value = getDurationString(videoPlayer.currentTime);\n}\n\nfunction updateTimeRange() {\n  const progress = videoPlayer.currentTime / videoPlayer.duration;\n  videoRange.value = `${progress * 100}`;\n}\n\nfunction onVideoRangeMouseMove() {\n  if (document.activeElement !== videoRange) return;\n  onVideoRangeChange();\n}\n\nfunction onVideoTimeSelect() {\n  selectVideoTime();\n}\n\nfunction selectVideoTimeSide(selectMinutes: boolean) {\n  const value = videoTime.value;\n  const start = 0;\n  const colon = value.indexOf(\":\");\n  const end = value.length;\n  if (selectMinutes) {\n    videoTime.setSelectionRange(start, colon);\n  } else {\n    videoTime.setSelectionRange(colon + 1, end);\n  }\n}\n\nfunction selectVideoTime() {\n  const value = videoTime.value;\n  const colon = value.indexOf(\":\") + 1;\n  const selStart = videoTime.selectionStart;\n  selectVideoTimeSide(selStart === null || selStart < colon);\n}\n\nfunction clampVideoTime() {\n  const selStart = videoTime.selectionStart;\n  const selEnd = videoTime.selectionEnd;\n  const [mm, ss] = videoTime.value.split(\":\").map(parseFloat);\n  const seconds = mm * 60 + ss;\n  const duration = videoPlayer.duration;\n  const clamped = clamp(0, duration, seconds);\n  videoTime.value = getDurationString(clamped);\n  videoTime.setSelectionRange(selStart, selEnd);\n}\n\nfunction clamp(min, max, value) {\n  return Math.min(Math.max(value, min), max);\n}\n\nfunction removeExt(filname) {\n  return filname.replace(/\\.[^/.]+$/, \"\");\n}\n\nfunction fixVideoTime() {\n  const isValid = /^\\d{0,3}:\\d{0,2}$/.test(videoTime.value);\n\n  if (isValid) return clampVideoTime();\n\n  const selStart = videoTime.selectionStart;\n  const selEnd = videoTime.selectionEnd;\n\n  const isValidStart = /^\\d{0,3}:[^:]*$/.test(videoTime.value);\n  const isValidEnd = /^[^:]*:\\d{0,2}$/.test(videoTime.value);\n\n  const value = videoTime.value;\n  const [mm, ss] = getDurationString(videoPlayer.currentTime).split(\":\");\n\n  const start = isValidStart ? value.split(\":\")[0] : mm;\n  const end = isValidEnd ? value.split(\":\")[1] : ss;\n\n  videoTime.value = `${start}:${end}`;\n\n  videoTime.setSelectionRange(selStart, selEnd);\n\n  clampVideoTime();\n}\n\nfunction selectVideoTimeDone() {\n  const isDone = /^\\d{2,}:\\d{2}$/.test(videoTime.value);\n  if (!isDone) return;\n  selectVideoTime();\n}\n\nvideoRange.addEventListener(\"mousemove\", onVideoRangeMouseMove);\nvideoTime.addEventListener(\"select\", onVideoTimeSelect);\nvideoTime.addEventListener(\"focus\", onVideoTimeSelect);\nvideoTime.addEventListener(\"click\", onVideoTimeSelect);\nvideoTime.addEventListener(\"blur\", fixVideoTime);\nvideoTime.addEventListener(\"keypress\", (e) => {\n  if (!numbers.includes(e.key)) return;\n  e.preventDefault();\n  fixVideoTime();\n});\n\nconst numbers = \"0123456789\".split(\"\");\nconst arrows = [\"ArrowLeft\", \"ArrowRight\", \"ArrowUp\", \"ArrowDown\"];\n\nvideoTime.addEventListener(\"keydown\", (e) => {\n  if (!arrows.includes(e.key)) return;\n  e.preventDefault();\n\n  const selStart = videoTime.selectionStart;\n\n  const value = videoTime.value;\n\n  const colon = value.indexOf(\":\");\n  const minutesSelected = selStart === null || selStart < colon;\n\n  const [mm, ss] = value.split(\":\").map(parseFloat);\n  const [mmMax, ssMax] = getDurationString(videoPlayer.duration)\n    .split(\":\")\n    .map(parseFloat);\n\n  switch (e.key) {\n    case \"ArrowLeft\":\n      selectVideoTimeSide(true);\n      break;\n    case \"ArrowRight\":\n      selectVideoTimeSide(false);\n      break;\n    case \"ArrowUp\":\n      if (minutesSelected) {\n        if (mm === mmMax) return;\n        videoTime.value = `${pad(mm + 1)}:${pad(ss)}`;\n        selectVideoTimeSide(true);\n      } else {\n        if (ss === 59) {\n          videoTime.value = `${pad(mm + 1)}:00`;\n        } else {\n          if (mm === mmMax && ss === ssMax) return;\n          videoTime.value = `${pad(mm)}:${pad(ss + 1)}`;\n        }\n        selectVideoTimeSide(false);\n      }\n      break;\n    case \"ArrowDown\":\n      if (minutesSelected) {\n        if (mm === 0) return;\n        videoTime.value = `${pad(mm - 1)}:${pad(ss)}`;\n        selectVideoTimeSide(true);\n      } else {\n        if (ss === 0) {\n          if (mm === 0) return;\n          videoTime.value = `${pad(mm - 1)}:59`;\n        } else {\n          videoTime.value = `${pad(mm)}:${pad(ss - 1)}`;\n        }\n        selectVideoTimeSide(false);\n      }\n      break;\n  }\n\n  onVideoTimeChange();\n});\n\nfunction onVideoTimeChange() {\n  const value = videoTime.value;\n  const [mm, ss] = value.split(\":\").map(parseFloat);\n  const seconds = mm * 60 + ss;\n  const duration = videoPlayer.duration;\n  const clamped = clamp(0, duration, seconds);\n  videoPlayer.currentTime = clamped;\n}\n\nfunction onGenerateClick() {\n  canvas.width = videoPlayer.videoWidth;\n  canvas.height = videoPlayer.videoHeight;\n  ctx.drawImage(videoPlayer, 0, 0);\n  canvas.toBlob(onThumbnailGenerated);\n}\n\nfunction onThumbnailGenerated(blob: Blob | null) {\n  if (!blob) return;\n\n  const url = URL.createObjectURL(blob);\n  thumbnail.src = url;\n  download.href = url;\n\n  stage.show(\"thumbnail\");\n}\n\ngenerate.addEventListener(\"click\", onGenerateClick);\n"],"names":["$ad2bcec7a0192558$var$fileDropZone","document","getElementById","$ad2bcec7a0192558$var$fileUploadInput","$ad2bcec7a0192558$var$fileNameOutput","$ad2bcec7a0192558$var$videoPlayer","$ad2bcec7a0192558$var$toUpload","$ad2bcec7a0192558$var$videoRange","$ad2bcec7a0192558$var$videoTime","$ad2bcec7a0192558$var$videoDur","$ad2bcec7a0192558$var$loading","$ad2bcec7a0192558$var$generate","$ad2bcec7a0192558$var$thumbnail","$ad2bcec7a0192558$var$download","$ad2bcec7a0192558$var$toVideo","$ad2bcec7a0192558$var$restart","$ad2bcec7a0192558$var$uploadForm","$ad2bcec7a0192558$var$canvas","createElement","$ad2bcec7a0192558$var$ctx","getContext","alpha","desynchronized","colorSpace","willReadFrequently","$ad2bcec7a0192558$var$stages","upload","loading","video","thumbnail","$ad2bcec7a0192558$var$stage","close","element","Object","values","hidden","show","name","this","tansition","from","to","$ad2bcec7a0192558$var$goBackToUpload","srcObject","reset","$ad2bcec7a0192558$var$onFileSelected","file","value","src","URL","createObjectURL","download","replace","$ad2bcec7a0192558$var$onVideoProgress","end","buffered","duration","$ad2bcec7a0192558$var$getDurationString","seconds","Math","ceil","minutes","floor","ss","$ad2bcec7a0192558$var$pad","toString","padStart","$ad2bcec7a0192558$var$updateTimeInput","currentTime","$ad2bcec7a0192558$var$onVideoTimeSelect","$ad2bcec7a0192558$var$selectVideoTime","$ad2bcec7a0192558$var$selectVideoTimeSide","selectMinutes","colon","indexOf","length","setSelectionRange","selStart","selectionStart","$ad2bcec7a0192558$var$clampVideoTime","selEnd","selectionEnd","mm","split","map","parseFloat","clamped","$ad2bcec7a0192558$var$clamp","min","max","$ad2bcec7a0192558$var$fixVideoTime","test","isValidStart","isValidEnd","start","addEventListener","e","preventDefault","classList","add","remove","dataTransfer","files","blur","clipboardData","type","startsWith","removeEventListener","loop","progress","$ad2bcec7a0192558$var$updateTimeRange","activeElement","pause","percent","valueAsNumber","$ad2bcec7a0192558$var$onVideoRangeChange","$ad2bcec7a0192558$var$numbers","includes","key","$ad2bcec7a0192558$var$arrows","$ad2bcec7a0192558$var$onThumbnailGenerated","blob","url","href","minutesSelected","mmMax","ssMax","$ad2bcec7a0192558$var$onVideoTimeChange","width","videoWidth","height","videoHeight","drawImage","toBlob"],"version":3,"file":"index.f39487b4.js.map"}