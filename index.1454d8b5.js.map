{"mappings":"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","sources":["src/main.ts"],"sourcesContent":["const UPLOAD_STAGE = \"upload-stage\";\nconst LOADING_STAGE = \"loading-stage\";\nconst VIDEO_STAGE = \"video-stage\";\nconst THUMBNAIL_STAGE = \"thumbnail-stage\";\n\nconst DROP_ZONE = \"upload-drop-zone\";\nconst FILE_INPUT = \"upload-file-input\";\n\nconst VIDEO = \"video\";\nconst FILE_NAME = \"loading-filename\";\nconst LOADING_PROGRESS = \"loading-progress\";\nconst BACK_UPLOAD = \"back-to-upload-button\";\nconst VIDEO_SCRUBBER = \"video-time-range\";\nconst VIDEO_TIME = \"video-time-input\";\nconst VIDEO_DURATION = \"video-duration-output\";\nconst GENERATE_BUTTON = \"generate-thumbnail\";\nconst THUMBNAIL_IMAGE = \"thumbnail-image\";\nconst THUMBNAIL_DOWNLOAD = \"thumbnail-download-link\";\nconst RESTART_BUTTON = \"thumbnail-new-button\";\nconst BACK_VIDEO = \"back-to-video-button\";\nconst UPLOAD_FORM = \"upload-form\";\n\nconst fileDropZone = <HTMLLabelElement>document.getElementById(DROP_ZONE);\nconst fileUploadInput = <HTMLInputElement>document.getElementById(FILE_INPUT);\nconst fileNameOutput = <HTMLOutputElement>document.getElementById(FILE_NAME);\nconst videoPlayer = <HTMLVideoElement>document.getElementById(VIDEO);\nconst toUpload = <HTMLButtonElement>document.getElementById(BACK_UPLOAD);\nconst videoRange = <HTMLInputElement>document.getElementById(VIDEO_SCRUBBER);\nconst videoTime = <HTMLInputElement>document.getElementById(VIDEO_TIME);\nconst videoDur = <HTMLOutputElement>document.getElementById(VIDEO_DURATION);\nconst loading = <HTMLProgressElement>document.getElementById(LOADING_PROGRESS);\nconst generate = <HTMLButtonElement>document.getElementById(GENERATE_BUTTON);\nconst thumbnail = <HTMLImageElement>document.getElementById(THUMBNAIL_IMAGE);\nconst download = <HTMLAnchorElement>document.getElementById(THUMBNAIL_DOWNLOAD);\nconst toVideo = <HTMLButtonElement>document.getElementById(BACK_VIDEO);\nconst restart = <HTMLButtonElement>document.getElementById(RESTART_BUTTON);\nconst uploadForm = <HTMLFormElement>document.getElementById(UPLOAD_FORM);\nconst canvas = document.createElement(\"canvas\");\nconst ctx = canvas.getContext(\"2d\", {\n  alpha: false,\n  desynchronized: true,\n  colorSpace: \"srgb\",\n  willReadFrequently: true,\n})!;\n\nconst stages = {\n  upload: document.getElementById(UPLOAD_STAGE)!,\n  loading: document.getElementById(LOADING_STAGE)!,\n  video: document.getElementById(VIDEO_STAGE)!,\n  thumbnail: document.getElementById(THUMBNAIL_STAGE)!,\n};\nconst stage = {\n  close() {\n    for (const element of Object.values<HTMLElement>(stages)) {\n      element.hidden = true;\n    }\n  },\n  show(name: Stage) {\n    this.close();\n    stages[name].hidden = false;\n  },\n  tansition(from: Stage, to: Stage) {\n    if (stages[from].hidden) return;\n    stages[from].hidden = true;\n    stages[to].hidden = false;\n  },\n};\n\ntype Stage = keyof typeof stages;\n\nstage.show(\"upload\");\n\nfileDropZone.addEventListener(\"dragover\", (e) => {\n  e.preventDefault();\n  fileDropZone.classList.add(\"drag-over\");\n});\n\nfileDropZone.addEventListener(\"dragleave\", (e) => {\n  e.preventDefault();\n  fileDropZone.classList.remove(\"drag-over\");\n});\n\nfileDropZone.addEventListener(\"drop\", (e) => {\n  e.preventDefault();\n  fileDropZone.classList.remove(\"drag-over\");\n  const file = e.dataTransfer?.files[0];\n  if (!file) return;\n  onFileSelected(file);\n});\n\nfileUploadInput.addEventListener(\"change\", (e) => {\n  const file = fileUploadInput.files?.[0];\n\n  fileUploadInput.value = \"\";\n  fileUploadInput.blur();\n  if (!file) return;\n  onFileSelected(file);\n});\n\ndocument.addEventListener(\"paste\", (e) => {\n  const file = e.clipboardData?.files?.[0];\n  if (!file || file.type.startsWith(\"video/\")) return;\n  onFileSelected(file);\n});\n\nfunction goBackToUpload() {\n  reset();\n  stage.show(\"upload\");\n}\n\nfunction reset() {\n  uploadForm.reset();\n  loading.value = 0;\n  videoRange.value = \"0\";\n  videoTime.value = \"00:00\";\n  download.download = \"\";\n  fileNameOutput.value = \"\";\n  videoPlayer.src = \"\";\n  thumbnail.src = \"\";\n}\n\nfunction onFileSelected(file: File) {\n  reset();\n  fileNameOutput.value = file.name;\n  videoPlayer.src = URL.createObjectURL(file);\n  download.download = removeExt(file.name);\n  stage.show(\"loading\");\n}\n\nfunction onVideoProgress() {\n  const end = videoPlayer.buffered.end(0);\n  loading.value = (end / videoPlayer.duration) * 100;\n}\n\nvideoPlayer.addEventListener(\"loadedmetadata\", () => {\n  videoPlayer.addEventListener(\"progress\", onVideoProgress);\n  videoDur.value = getDurationString(videoPlayer.duration);\n});\n\nfunction getDurationString(duration: number) {\n  duration = Math.ceil(duration);\n  const seconds = duration % 60;\n  const minutes = Math.floor(duration / 60);\n  const ss = pad(seconds);\n  const mm = pad(minutes);\n  return `${mm}:${ss}`;\n}\n\nvideoPlayer.addEventListener(\"canplaythrough\", () => {\n  videoPlayer.removeEventListener(\"progress\", onVideoProgress);\n  stage.tansition(\"loading\", \"video\");\n});\n\ntoUpload.addEventListener(\"click\", goBackToUpload);\ntoVideo.addEventListener(\"click\", () => stage.show(\"video\"));\nrestart.addEventListener(\"click\", goBackToUpload);\n\nvideoPlayer.addEventListener(\"timeupdate\", () => {\n  updateTimeRange();\n  updateTimeInput();\n});\n\nfunction pad(seconds: number) {\n  return seconds.toString().padStart(2, \"0\");\n}\n\nfunction onVideoRangeChange() {\n  videoPlayer.pause();\n  const value = videoRange.valueAsNumber;\n  const percent = value / 100;\n  videoPlayer.currentTime = videoPlayer.duration * percent;\n  updateTimeInput();\n}\n\nfunction updateTimeInput() {\n  videoTime.value = getDurationString(videoPlayer.currentTime);\n}\n\nfunction updateTimeRange() {\n  const progress = videoPlayer.currentTime / videoPlayer.duration;\n  videoRange.value = `${progress * 100}`;\n}\n\nfunction onVideoRangeMouseMove() {\n  if (document.activeElement !== videoRange) return;\n  requestAnimationFrame(onVideoRangeChange);\n}\n\nfunction onVideoTimeSelect() {\n  selectVideoTime();\n}\n\nfunction selectVideoTimeSide(selectMinutes: boolean) {\n  const value = videoTime.value;\n  const start = 0;\n  const colon = value.indexOf(\":\");\n  const end = value.length;\n  if (selectMinutes) {\n    videoTime.setSelectionRange(start, colon);\n  } else {\n    videoTime.setSelectionRange(colon + 1, end);\n  }\n}\n\nfunction selectVideoTime() {\n  const value = videoTime.value;\n  const colon = value.indexOf(\":\") + 1;\n  const selStart = videoTime.selectionStart;\n  selectVideoTimeSide(selStart === null || selStart < colon);\n}\n\nfunction clampVideoTime() {\n  const selStart = videoTime.selectionStart;\n  const selEnd = videoTime.selectionEnd;\n  const [mm, ss] = videoTime.value.split(\":\").map(parseFloat);\n  const seconds = mm * 60 + ss;\n  const duration = videoPlayer.duration;\n  const clamped = clamp(0, duration, seconds);\n  videoTime.value = getDurationString(clamped);\n  videoTime.setSelectionRange(selStart, selEnd);\n}\n\nfunction clamp(min, max, value) {\n  return Math.min(Math.max(value, min), max);\n}\n\nfunction removeExt(filname) {\n  return filname.replace(/\\.[^/.]+$/, \"\");\n}\n\nfunction fixVideoTime() {\n  const isValid = /^\\d{0,3}:\\d{0,2}$/.test(videoTime.value);\n\n  if (isValid) return clampVideoTime();\n\n  const selStart = videoTime.selectionStart;\n  const selEnd = videoTime.selectionEnd;\n\n  const isValidStart = /^\\d{0,3}:[^:]*$/.test(videoTime.value);\n  const isValidEnd = /^[^:]*:\\d{0,2}$/.test(videoTime.value);\n\n  const value = videoTime.value;\n  const [mm, ss] = getDurationString(videoPlayer.currentTime).split(\":\");\n\n  const start = isValidStart ? value.split(\":\")[0] : mm;\n  const end = isValidEnd ? value.split(\":\")[1] : ss;\n\n  videoTime.value = `${start}:${end}`;\n\n  videoTime.setSelectionRange(selStart, selEnd);\n\n  clampVideoTime();\n}\n\nfunction selectVideoTimeDone() {\n  const isDone = /^\\d{2,}:\\d{2}$/.test(videoTime.value);\n  if (!isDone) return;\n  selectVideoTime();\n}\n\nvideoRange.addEventListener(\"mousemove\", onVideoRangeMouseMove);\nvideoTime.addEventListener(\"select\", onVideoTimeSelect);\nvideoTime.addEventListener(\"focus\", onVideoTimeSelect);\nvideoTime.addEventListener(\"click\", onVideoTimeSelect);\nvideoTime.addEventListener(\"blur\", fixVideoTime);\nvideoTime.addEventListener(\"keypress\", (e) => {\n  if (!numbers.includes(e.key)) return;\n  e.preventDefault();\n  fixVideoTime();\n});\n\nconst numbers = \"0123456789\".split(\"\");\nconst arrows = [\"ArrowLeft\", \"ArrowRight\", \"ArrowUp\", \"ArrowDown\"];\n\nvideoTime.addEventListener(\"keydown\", (e) => {\n  if (!arrows.includes(e.key)) return;\n  e.preventDefault();\n\n  const selStart = videoTime.selectionStart;\n\n  const value = videoTime.value;\n\n  const colon = value.indexOf(\":\");\n  const minutesSelected = selStart === null || selStart < colon;\n\n  const [mm, ss] = value.split(\":\").map(parseFloat);\n  const [mmMax, ssMax] = getDurationString(videoPlayer.duration)\n    .split(\":\")\n    .map(parseFloat);\n\n  switch (e.key) {\n    case \"ArrowLeft\":\n      selectVideoTimeSide(true);\n      break;\n    case \"ArrowRight\":\n      selectVideoTimeSide(false);\n      break;\n    case \"ArrowUp\":\n      if (minutesSelected) {\n        if (mm === mmMax) return;\n        if (ss > ssMax && mm == mmMax - 1) {\n          videoTime.value = `${pad(mm)}:${pad(ssMax)}`;\n        } else {\n          videoTime.value = `${pad(mm + 1)}:${pad(ss)}`;\n        }\n        selectVideoTimeSide(true);\n      } else {\n        if (mm === mmMax) {\n          if (ss === ssMax) return;\n          if (ss === ssMax - 1) {\n            videoTime.value = `${pad(mm)}:${pad(ssMax)}`;\n          } else {\n            videoTime.value = `${pad(mm)}:${pad(ss + 1)}`;\n          }\n        } else {\n          if (ss === 59) {\n            videoTime.value = `${pad(mm + 1)}:00`;\n          } else {\n            videoTime.value = `${pad(mm)}:${pad(ss + 1)}`;\n          }\n        }\n        selectVideoTimeSide(false);\n      }\n      break;\n    case \"ArrowDown\":\n      if (minutesSelected) {\n        if (mm === 0) return;\n        videoTime.value = `${pad(mm - 1)}:${pad(ss)}`;\n        selectVideoTimeSide(true);\n      } else {\n        if (ss === 0) {\n          if (mm === 0) return;\n          videoTime.value = `${pad(mm - 1)}:59`;\n        } else {\n          videoTime.value = `${pad(mm)}:${pad(ss - 1)}`;\n        }\n        selectVideoTimeSide(false);\n      }\n      break;\n  }\n\n  onVideoTimeChange();\n});\n\nfunction onVideoTimeChange() {\n  const value = videoTime.value;\n  const [mm, ss] = value.split(\":\").map(parseFloat);\n  const seconds = mm * 60 + ss;\n  const duration = videoPlayer.duration;\n  const clamped = clamp(0, duration, seconds);\n  videoPlayer.currentTime = clamped;\n}\n\nfunction onGenerateClick() {\n  canvas.width = videoPlayer.videoWidth;\n  canvas.height = videoPlayer.videoHeight;\n  ctx.drawImage(videoPlayer, 0, 0);\n  canvas.toBlob(onThumbnailGenerated);\n}\n\nfunction onThumbnailGenerated(blob: Blob | null) {\n  if (!blob) return;\n\n  const url = URL.createObjectURL(blob);\n  thumbnail.src = url;\n  download.href = url;\n\n  stage.show(\"thumbnail\");\n}\n\ngenerate.addEventListener(\"click\", onGenerateClick);\n"],"names":["$ad2bcec7a0192558$var$fileDropZone","document","getElementById","$ad2bcec7a0192558$var$fileUploadInput","$ad2bcec7a0192558$var$fileNameOutput","$ad2bcec7a0192558$var$videoPlayer","$ad2bcec7a0192558$var$toUpload","$ad2bcec7a0192558$var$videoRange","$ad2bcec7a0192558$var$videoTime","$ad2bcec7a0192558$var$videoDur","$ad2bcec7a0192558$var$loading","$ad2bcec7a0192558$var$generate","$ad2bcec7a0192558$var$thumbnail","$ad2bcec7a0192558$var$download","$ad2bcec7a0192558$var$toVideo","$ad2bcec7a0192558$var$restart","$ad2bcec7a0192558$var$uploadForm","$ad2bcec7a0192558$var$canvas","createElement","$ad2bcec7a0192558$var$ctx","getContext","alpha","desynchronized","colorSpace","willReadFrequently","$ad2bcec7a0192558$var$stages","upload","loading","video","thumbnail","$ad2bcec7a0192558$var$stage","close","element","Object","values","hidden","show","name","this","tansition","from","to","$ad2bcec7a0192558$var$goBackToUpload","$ad2bcec7a0192558$var$reset","reset","value","download","src","$ad2bcec7a0192558$var$onFileSelected","file","URL","createObjectURL","replace","$ad2bcec7a0192558$var$onVideoProgress","end","buffered","duration","$ad2bcec7a0192558$var$getDurationString","seconds","Math","ceil","minutes","floor","ss","$ad2bcec7a0192558$var$pad","toString","padStart","$ad2bcec7a0192558$var$onVideoRangeChange","pause","percent","valueAsNumber","currentTime","$ad2bcec7a0192558$var$updateTimeInput","$ad2bcec7a0192558$var$onVideoTimeSelect","$ad2bcec7a0192558$var$selectVideoTime","$ad2bcec7a0192558$var$selectVideoTimeSide","selectMinutes","colon","indexOf","length","setSelectionRange","selStart","selectionStart","$ad2bcec7a0192558$var$clampVideoTime","selEnd","selectionEnd","mm","split","map","parseFloat","clamped","$ad2bcec7a0192558$var$clamp","min","max","$ad2bcec7a0192558$var$fixVideoTime","test","isValidStart","isValidEnd","start","addEventListener","e","preventDefault","classList","add","remove","dataTransfer","files","blur","clipboardData","type","startsWith","removeEventListener","progress","$ad2bcec7a0192558$var$updateTimeRange","activeElement","requestAnimationFrame","$ad2bcec7a0192558$var$numbers","includes","key","$ad2bcec7a0192558$var$arrows","$ad2bcec7a0192558$var$onThumbnailGenerated","blob","url","href","minutesSelected","mmMax","ssMax","$ad2bcec7a0192558$var$onVideoTimeChange","width","videoWidth","height","videoHeight","drawImage","toBlob"],"version":3,"file":"index.1454d8b5.js.map"}